<app-header></app-header>

<form class="row g-3 was-validated" [formGroup]="createProduct" (ngSubmit)="create()">
  <div class="row">
    <!-- Tên SP -->
    <div class="mb-3 col-md-12">
      <label class="form-label" for="productName">Tên Sản Phẩm: <span style="color: red">(*)</span></label>
      <input type="text" class="form-control" id="productName" formControlName="productName"
             placeholder="Nhập tên sản phẩm" required />
      <div class="alert alert-danger mt-1"
           *ngIf="createProduct.get('productName')?.invalid && createProduct.get('productName')?.touched">
        Tên sản phẩm không được để trống
      </div>
    </div>

    <!-- Giá -->
    <div class="mb-3 col-md-6">
      <label class="form-label" for="price">Giá: <span style="color: red">(*)</span></label>
      <input type="text" class="form-control" id="price" formControlName="price" placeholder="Nhập giá" required />
      <div class="alert alert-danger mt-1"
           *ngIf="createProduct.get('price')?.invalid && createProduct.get('price')?.touched">
        Giá phải là số và không được để trống
      </div>
    </div>

    <!-- Số lượng -->
    <div class="mb-3 col-md-6">
      <label class="form-label" for="quantity">Số Lượng: <span style="color: red">(*)</span></label>
      <input type="text" class="form-control" id="quantity" formControlName="quantity"
             placeholder="Nhập số lượng" required />
      <div class="alert alert-danger mt-1"
           *ngIf="createProduct.get('quantity')?.invalid && createProduct.get('quantity')?.touched">
        Số lượng phải là số và không được để trống
      </div>
    </div>

    <!-- Hãng -->
    <div class="col-md-6 mb-3">
      <label class="form-label" for="productType">Hãng: <span style="color: red">(*)</span></label>
      <div class="input-group">
        <select class="form-control" id="productType" formControlName="idType" required>
          <option [ngValue]="null">Chọn hãng</option>
          <option *ngFor="let p of productType" [ngValue]="p.idType">{{ p.nameType }}</option>
        </select>
      </div>
      <div class="alert alert-danger mt-1"
           *ngIf="createProduct.get('idType')?.invalid && createProduct.get('idType')?.touched">
        Hãng không được để trống
      </div>
    </div>

    <!-- Khuyến mãi -->
    <div class="col-md-6 mb-3">
      <label class="form-label" for="promotion">Khuyến Mãi: <span style="color: red">(*)</span></label>
      <div class="input-group">
        <select class="form-control" id="promotion" formControlName="idPromotion" required>
          <option [ngValue]="null">Chọn khuyến mãi</option>
          <option *ngFor="let p of promotion" [ngValue]="p.idPromotion">{{ p.namePromotion }}</option>
        </select>
      </div>
      <div class="alert alert-danger mt-1"
           *ngIf="createProduct.get('idPromotion')?.invalid && createProduct.get('idPromotion')?.touched">
        Khuyến mãi không được để trống
      </div>
    </div>

    <!-- Các trường khác (không required, không cảnh báo) -->
    <div class="mb-3 col-md-6">
      <label class="form-label" for="screen">Màn Hình:</label>
      <input type="text" class="form-control" id="screen" formControlName="screen" placeholder="Nhập màn hình" />
    </div>

    <div class="mb-3 col-md-6">
      <label class="form-label" for="hdh">Hệ Điều Hành:</label>
      <input type="text" class="form-control" id="hdh" formControlName="hdh" placeholder="Nhập hệ điều hành" />
    </div>

    <div class="mb-3 col-lg-6">
      <label class="form-label" for="cameraT">Camera:</label>
      <input type="text" class="form-control" id="cameraT" formControlName="cameraT" placeholder="Nhập camera" />
    </div>

    <div class="mb-3 col-lg-6">
      <label class="form-label" for="cpu">CPU:</label>
      <input type="text" class="form-control" id="cpu" formControlName="cpu" placeholder="Nhập CPU" />
    </div>

    <div class="mb-3 col-lg-6">
      <label class="form-label" for="ram">RAM:</label>
      <input type="text" class="form-control" id="ram" formControlName="ram" placeholder="Nhập RAM" />
    </div>

    <div class="mb-3 col-lg-6">
      <label class="form-label" for="rom">SSD:</label>
      <input type="text" class="form-control" id="rom" formControlName="rom" placeholder="Nhập SSD" />
    </div>

    <div class="mb-3 col-lg-6">
      <label class="form-label" for="sdcard">SD Card:</label>
      <input type="text" class="form-control" id="sdcard" formControlName="sdCard" placeholder="Nhập SD Card" />
    </div>

    <div class="mb-3 col-lg-6">
      <label class="form-label" for="pin">Pin:</label>
      <input type="text" class="form-control" id="pin" formControlName="pin" placeholder="Nhập pin" />
    </div>

    <div class="mb-3 col-lg-12">
                <label class="form-label" for="avt">Ảnh: <span style="color: red">(*)</span></label>
                <input type="file" class="form-control" id="avt" formControlName="avt" (change)="onFileChange($event)"
                  required />
                <div class="alert alert-danger mt-1"
                  *ngIf="createProduct.get('avt')?.invalid && createProduct.get('avt')?.touched">
                  Ảnh không được để trống
                </div>
              </div>

    <!-- Buttons -->
    <div class="col-md-3 mb-3"></div>
    <div class="col-md-3 mb-3">
      <button type="reset" class="btn btn-danger" routerLink="/listProduct">Hủy</button>
    </div>
    <div class="col-md-3 mb-3">
      <button type="submit" class="btn btn-success" [disabled]="!createProduct.valid || submitting">
        Lưu thay đổi
      </button>
    </div>
    <div class="col-md-3 mb-3"></div>
  </div>
</form>

<app-footer></app-footer>
